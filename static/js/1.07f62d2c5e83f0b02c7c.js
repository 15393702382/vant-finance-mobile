webpackJsonp([1],{"8K6U":function(t,i,n){i=t.exports=n("FZ+f")(!1),i.push([t.i,".can-wrap[data-v-ac7ea1d4],.top-con[data-v-ac7ea1d4]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.can-wrap[data-v-ac7ea1d4]{overflow:hidden;-webkit-box-align:center;-webkit-align-items:center;align-items:center;position:relative}.can-wrap canvas[data-v-ac7ea1d4]{position:absolute;top:0;left:0;-webkit-transform:scale3d(.25,.25,.25);transform:scale3d(.25,.25,.25);-webkit-transform-origin:left top;transform-origin:left top;z-index:2}#canBg[data-v-ac7ea1d4]{z-index:1}",""])},BO1k:function(t,i,n){t.exports={default:n("fxRn"),__esModule:!0}},"CHB+":function(t,i,n){var e=n("oIzf");"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var r=n("rjj0").default;r("318f7b78",e,!0,{})},IOpv:function(t,i,n){"use strict";n.d(i,"a",function(){return e}),n.d(i,"b",function(){return r});var e=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",[n("van-nav-bar",{attrs:{"left-arrow":"",title:"设置手势密码",fixed:"","z-index":10},on:{"click-left":t._routerBack}}),t._v(" "),n("div",{staticClass:"align-center navbar-con-16"},[n("div",{staticClass:"top-small-con"},[n("div",{staticClass:"top-small"},t._l(9,function(i){return n("div",{key:i,staticClass:"top-dot",class:{"high-dot":t.isHighlight(i)}})}),0)]),t._v(" "),n("div",{staticClass:"info-tip",class:{"error-tips":t.isTipsError}},[t._v(t._s(t.infoTips))]),t._v(" "),n("gesture-lock",{ref:"inputLock",staticClass:"main-lock",on:{input:t.onLockInput}}),t._v(" "),t.lastInput.length?n("div",{staticClass:"reinput-entry",on:{click:t.onResetInput}},[t._v("\n      重新设置手势密码\n    ")]):t._e()],1)],1)},r=[]},Mv9b:function(t,i,n){"use strict";var e=n("BO1k"),r=n.n(e);i.a={name:"gesture-lock",props:{normalColor:{type:String,default:"#CA4040"},pointBgColor:{type:String,default:"#ffffff"},pointActiveColor:{type:String,default:"#CA4040"},lineActiveColor:{type:String,default:"rgba(54, 52, 255, .3)"},errorColor:{type:String,default:"#FF3F3F"},errorLineColor:{type:String,default:"rgba(255, 63, 63, .3)"},errorTime:{type:String,default:"600"},canWRatio:{type:Number,default:.7}},computed:{canW:function(){return(this.winW*this.canWRatio).toFixed(2)},canH:function(){return this.canW},wrapH:function(){return parseInt(this.canH/4)},wrapW:function(){return parseInt(this.canW/4)}},data:function(){return{winH:0,winW:0,padding:0,ringR:0,ringLineW:0,ringMargin:0,circleR:0,lineW:0,ringArr:[],activeArr:[],lastX:0,lastY:0,activeIndex:{},handLock:[],ctx:null,errorTimer:null}},methods:{touchstart:function(t){this.clear();var i=t.targetTouches[0].pageX,n=t.targetTouches[0].pageY,e=this.resolveLocation(i,n),r=e.x,a=e.y;this.lastX=r,this.lastY=a,this.isInRing(r,a),this.initAnimation()},touchmove:function(t){t.preventDefault();var i=t.targetTouches[0].pageX,n=t.targetTouches[0].pageY,e=this.resolveLocation(i,n),r=e.x,a=e.y;this.lastX=r,this.lastY=a,this.isInRing(r,a),this.initAnimation()},touchend:function(t){this.initAnimation();var i=this.getHandLock();this.$emit("input",i)},initAnimation:function(){this.clearCanvas(),this.drawActiveLine(),this.drawLastActiveLine(this.lastX,this.lastY),this.drawActiveRing()},initCanvas:function(){this.canvasBg=this.$refs.canvasBg,this.canvas=this.$refs.vCanvas,this.ctxBg=this.canvasBg.getContext("2d"),this.ctx=this.canvas.getContext("2d");var t=this.canvas,i=this.canvasBg;t.width=this.canW,t.height=this.canH,i.width=this.canW,i.height=this.canH,this.drawOpacityBg(),this.drawAllRing(this.ctxBg)},getHandLock:function(){return this.handLock},clearCanvas:function(){this.ctx.clearRect(0,0,this.canW,this.canH)},clear:function(){this.clearTimer(),this.handLock=[],this.activeArr=[],this.activeIndex={},this.clearCanvas(),this.$emit("clear")},showError:function(){var t=this;this.clearCanvas(),this.drawActiveRing(this.errorColor),this.drawActiveLine(this.errorLineColor),this.errorTimer=setTimeout(function(){t.clear(),clearTimeout(t.errorTimer),t.errorTimer=null},this.errorTime)},clearTimer:function(){this.errorTimer&&(clearTimeout(this.errorTimer),this.errorTimer=null)},drawOpacityBg:function(){this.ctxBg.fillStyle="rgba(255, 255, 255, 0)",this.ctxBg.fillRect(0,0,this.canW,this.canH)},drawRing:function(t,i,n){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.normalColor,r=this.ringR,a=this.ringLineW;e=e;var s=this.pointBgColor;this.drawCircle(t,i,n,r,"fill",s),this.drawCircle(t,i,n,r,"stroke",e,a)},drawCircle:function(t,i,n,e,r,a){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;t.lineWidth=s,t.beginPath(),t.arc(i,n,e,0,2*Math.PI),t.closePath(),t[r+"Style"]=a,t[r]()},drawAllRing:function(t){for(var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.normalColor,n=this.ringMargin,e=this.padding+this.ringR,r=this.padding+this.ringR,a=void 0,s=void 0,o=0;o<3;o++){s=r+o*(n+2*this.ringR);for(var c=[],h=0;h<3;h++)a=e+h*(n+2*this.ringR),this.drawRing(t,a,s,i),c.push(this.savePos(a,s));this.ringArr.push(c)}},savePos:function(t,i){return{ringCenter:{x:t,y:i}}},drawActiveRing:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pointActiveColor,i=!0,n=!1,e=void 0;try{for(var a,s=r()(this.activeArr);!(i=(a=s.next()).done);i=!0){var o=a.value,c=o.ringCenter.x,h=o.ringCenter.y,l=this.circleR;this.drawCircle(this.ctx,c,h,this.ringR,"stroke",t,this.ringLineW),this.drawCircle(this.ctx,c,h,l,"fill",t)}}catch(t){n=!0,e=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw e}}},drawLine:function(t,i,n,e,r){var a=this.ctx;a.lineWidth=20,a.beginPath(),a.moveTo(t,i),a.lineTo(n,e),a.closePath(),a.strokeStyle=r,a.stroke()},drawActiveLine:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.lineActiveColor;if(!(this.activeArr.length<2))for(var i=0;i<this.activeArr.length-1;i++){var n=this.activeArr[i].ringCenter.x,e=this.activeArr[i].ringCenter.y,r=this.activeArr[i+1].ringCenter.x,a=this.activeArr[i+1].ringCenter.y;this.drawLine(n,e,r,a,t)}},drawLastActiveLine:function(t,i){if(!(this.activeArr.length<1)){var n=this.activeArr[this.activeArr.length-1].ringCenter.x,e=this.activeArr[this.activeArr.length-1].ringCenter.y;this.drawLine(n,e,t,i)}},getWindowSize:function(){this.winW=4*window.innerWidth,this.winH=4*window.innerHeight},getSizePer100:function(t){if(t)return(t=Number(t))*this.winW/750},initSize:function(){this.padding=this.getSizePer100(18.5),this.ringR=this.getSizePer100(58),this.ringLineW=this.getSizePer100(2),this.ringMargin=this.getSizePer100(68),this.circleR=this.getSizePer100(30),this.lineW=this.getSizePer100(12)},getOffsetCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$refs.canWrap;this.canOffsetTop=function t(i){var n=i.offsetTop;return null!==i.offsetParent&&(n+=t(i.offsetParent)),n}(t),this.canOffsetLeft=function t(i){var n=i.offsetLeft;return null!==i.offsetParent&&(n+=t(i.offsetParent)),n}(t)},resolveLocation:function(t,i){return{x:(4*(t-this.canOffsetLeft)).toFixed(2),y:(4*(i-this.canOffsetTop)).toFixed(4)}},isInRing:function(t,i){for(var n=0;n<this.ringArr.length;n++)for(var e=0;e<this.ringArr[n].length;e++){var r=this.ringArr[n][e].ringCenter.x,a=this.ringArr[n][e].ringCenter.y,s=Math.sqrt(Math.pow(Math.abs(t-r),2)+Math.pow(Math.abs(i-a),2))<this.ringR;if(s){var o=3*n+e;if(this.activeIndex[o])return;return this.handLock.push(o),this.activeIndex[o]=!0,this.activeArr.push(this.savePos(r,a)),this.lastX=r,this.lastY=a,s}}}},mounted:function(){var t=this;this.getWindowSize(),this.initSize(),this.initCanvas(),this.$nextTick(function(){t.getOffsetCanvas()})}}},aGOi:function(t,i,n){"use strict";function e(t){n("CHB+")}Object.defineProperty(i,"__esModule",{value:!0});var r=n("iqFJ"),a=n("IOpv"),s=n("XyMi"),o=e,c=Object(s.a)(r.a,a.a,a.b,!1,o,"data-v-390f49c6",null);i.default=c.exports},fxRn:function(t,i,n){n("+tPU"),n("zQR9"),t.exports=n("g8Ux")},g8Ux:function(t,i,n){var e=n("77Pl"),r=n("3fs2");t.exports=n("FeBl").getIterator=function(t){var i=r(t);if("function"!=typeof i)throw TypeError(t+" is not iterable!");return e(i.call(t))}},iqFJ:function(t,i,n){"use strict";var e=n("yLnZ");i.a={components:{GestureLock:e.a},name:"gesture-create",data:function(){return{isTipsError:!1,infoTips:"",lastInput:[]}},computed:{isHighlight:function(){var t=this;return function(i){if(t.lastInput)for(var n in t.lastInput)if(t.lastInput[n]==i-1)return!0}}},mounted:function(){this.showMessage("请输入手势密码")},methods:{onResetInput:function(){this.lastInput=[],this.showMessage("请输入手势密码")},requestSetGesturePwd:function(t){var i=this;this._showLoading(),localStorage.setItem("gesturePassword",t),setTimeout(function(){i._dismissLoading(),i._showToast("手势密码设置成功！"),i._routerBack()},1e3)},checkPwdAndUpdate:function(t){var i=this.lastInput.join(""),n=t.join("");n&&n==i?(this.showMessage("请输入手势密码"),this.$refs.inputLock.clear(),this.requestSetGesturePwd(n)):this.showLockError("两次输入不一致，请重新输入")},onLockInput:function(t){if(t.length<4)return void this.showLockError("至少需要连接四个点");this.lastInput.length?this.checkPwdAndUpdate(t):(this.lastInput=t,this.showMessage("请再重复一遍"),this.$refs.inputLock.clear())},showMessage:function(t){this.isTipsError=!1,this.infoTips=t},showLockError:function(t){this.isTipsError=!0,this.infoTips=t,this.$refs.inputLock.showError()}}}},oIzf:function(t,i,n){i=t.exports=n("FZ+f")(!1),i.push([t.i,".reinput-entry[data-v-390f49c6]{color:#ca4040;margin-top:40px;text-decoration:underline}.top-small-con[data-v-390f49c6]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.top-small-con .top-small[data-v-390f49c6]{width:42px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap}.top-small-con .top-small .top-dot[data-v-390f49c6]{margin:2px;width:10px;height:10px;background-color:#aaa;border-radius:20px;display:block}.top-small-con .top-small .high-dot[data-v-390f49c6]{background-color:#ca4040}.info-tip[data-v-390f49c6]{margin-top:20px;font-size:14px}.error-tips[data-v-390f49c6]{color:red}.main-lock[data-v-390f49c6]{margin:20px 0}",""])},vPYR:function(t,i,n){var e=n("8K6U");"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var r=n("rjj0").default;r("46efdeae",e,!0,{})},vvZj:function(t,i,n){"use strict";n.d(i,"a",function(){return e}),n.d(i,"b",function(){return r});var e=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{staticClass:"top-con"},[n("div",{ref:"canWrap",staticClass:"can-wrap",style:{height:t.wrapH+"px",width:t.wrapW+"px"}},[n("canvas",{ref:"canvasBg",attrs:{id:"canBg"}}),t._v(" "),n("canvas",{ref:"vCanvas",attrs:{id:"canDraw"},on:{touchstart:t.touchstart,touchmove:t.touchmove,touchend:t.touchend}})])])},r=[]},yLnZ:function(t,i,n){"use strict";function e(t){n("vPYR")}var r=n("Mv9b"),a=n("vvZj"),s=n("XyMi"),o=e,c=Object(s.a)(r.a,a.a,a.b,!1,o,"data-v-ac7ea1d4",null);i.a=c.exports}});